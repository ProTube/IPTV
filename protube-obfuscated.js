(function(){jwplayer.key="XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";let c=document.getElementById("channelContainer"),p=document.getElementById("playerContainer"),s=document.createElement("input");s.placeholder="Search channels...";s.style.width="80%";s.style.maxWidth="400px";s.style.padding="10px";s.style.borderRadius="8px";s.style.border="1px solid #ccc";s.style.fontSize="16px";document.getElementById("search").appendChild(s);let all=[];s.addEventListener("input",()=>{let f=s.value.toLowerCase();let r=all.filter(x=>x.name&&x.name.toLowerCase().includes(f));h(r)});function t(u){return fetch(u).then(r=>r.text())}function pM3U(x){let l=x.split("\n").map(x=>x.trim()).filter(Boolean),a=[],o={};l.forEach(n=>{if(n.startsWith("#EXTINF")){o.name=n.split(",").pop();let m=n.match(/tvg-logo="(.*?)"/);o.logo=m?m[1]:""}else if(n.includes("license_key")){let k=n.split("=").pop().split(":");o.keyId=k[0];o.key=k[1]}else if(n.startsWith("#EXTHTTP")){try{let j=JSON.parse(n.replace("#EXTHTTP:",""));let ck=j.cookie;if(ck.includes("__hdnea__")){let mt=ck.match(/__hdnea__=[^";\s]+/);o.token=mt?mt[0]:""}}catch(e){}}else if(n.startsWith("http")){o.url=n;a.push({...o});o={}}});return a}function h(arr){c.innerHTML="";arr.forEach(ch=>{let d=document.createElement("div");d.className="card";d.style.background="#fff";d.style.borderRadius="8px";d.style.textAlign="center";d.style.padding="12px";d.style.boxShadow="0 0 10px rgba(0,0,0,0.1)";d.style.cursor="pointer";d.style.transition="transform 0.2s ease";d.onmouseenter=()=>d.style.transform="translateY(-4px)";d.onmouseleave=()=>d.style.transform="none";d.innerHTML=`<img src="${ch.logo||'https://via.placeholder.com/100'}" style="width:100px;height:80px;object-fit:contain;margin:10px auto;" /><h3 style="font-size:14px;margin:5px 0;color:#000;">${ch.name}</h3>`;d.onclick=()=>play(ch);c.appendChild(d)})}function play(ch){c.style.display="none";p.style.display="block";document.body.style.overflow="hidden";history.pushState({playing:!0},"");let tok=ch.token||"";let u=ch.url.includes("__hdnea__")?ch.url:ch.url+(ch.url.includes("?")?"&":"?")+tok;(function(){const o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(m,u){if(u&&!u.includes("__hdnea__")){u+=(u.includes("?")?"&":"?")+tok}return o.apply(this,arguments)}})();let player=jwplayer("player").setup({playlist:[{title:ch.name,image:ch.logo,file:u,drm:ch.keyId&&ch.key?{clearkey:{keyId:ch.keyId,key:ch.key,robustness:{video:"SW_SECURE_DECODE",audio:"SW_SECURE_DECODE"}}}:void 0}],autostart:!0,controls:!0,width:"100%",height:"100%",stretching:"uniform",primary:"html5"});player.on("ready",()=>{let el=document.querySelector(".jwplayer");if(el.requestFullscreen)el.requestFullscreen();else if(el.webkitRequestFullscreen)el.webkitRequestFullscreen();else if(el.msRequestFullscreen)el.msRequestFullscreen()});window.onpopstate=()=>{player.remove();p.style.display="none";c.style.display="grid";document.body.style.overflow="auto";setTimeout(()=>window.scrollTo(0,0),100)}}t("https://amitb3669.github.io/jiotv.m3u/").then(d=>{all=pM3U(d);h(all)});})();
